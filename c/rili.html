<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>单选/复选/开关</title>
 <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
  <link rel="stylesheet" href="../style/weui.css"/> <link rel="stylesheet" href="../style/weui2.css"/>
     


</head>

<body ontouchstart>
      <div class="weui_cells weui_cells_access">
        <a href="javascript:;" class="weui_cell"  id="text"> <div class="weui_cell_bd weui_cell_primary"> <p>picker基础</p>  </div> <div class="weui_cell_ft text-v">选择</div> </a>
        
       </div> 

<div class="weui_cells weui_cells_form ">       
       <div class="weui_cell">
                <div class="weui_cell_hd"><label for="" class="weui_label">多列:</label></div>
                <div class="weui_cell_bd weui_cell_primary">
                    <input class="weui_input" type="text" value="" id='text1'/>
                    
                </div>
              
            </div>   
        <div class="weui_cell">
                <div class="weui_cell_hd"><label for="" class="weui_label">国家:</label></div>
                <div class="weui_cell_bd weui_cell_primary">
                    <input class="weui_input" type="text" value="" id='text2'/>
                    
                </div>
              
            </div>       
  
          <div class="weui_cell">
                <div class="weui_cell_hd"><label for="" class="weui_label">日期:</label></div>
                <div class="weui_cell_bd weui_cell_primary">
                    <input class="weui_input" type="text" value="" id='date'/>
                    
                </div>
              
            </div> 
  
          <div class="weui_cell">
                <div class="weui_cell_hd"><label for="" class="weui_label">时间:</label></div>
                <div class="weui_cell_bd weui_cell_primary">
                    <input class="weui_input" type="text" value="" id='time'/>
                    
                </div>
              
            </div>                
 
           <div class="weui_cell">
                <div class="weui_cell_hd"><label for="" class="weui_label">时间2:</label></div>
                <div class="weui_cell_bd weui_cell_primary">
                    <input class="weui_input" type="text" value="" id='time2'/>
                    
                </div>
              
            </div>  
 
            <div class="weui_cell">
                <div class="weui_cell_hd"><label for="" class="weui_label">时间3:</label></div>
                <div class="weui_cell_bd weui_cell_primary">
                    <input class="weui_input" type="text" value="" id='time3'/>
                    
                </div>
              
            </div>  
 
 </div>       
 
 
 <div id='time33'></div>   
       
       
<div class="weui_cells weui_cells_form "> 
            <div class="weui_cell">
                <div class="weui_cell_hd"><label for="" class="weui_label">弹出:</label></div>
                <div class="weui_cell_bd weui_cell_primary">
                    <input class="weui_input" type="text" value="" id='da'/>
                    
                </div>
              
            </div> 
            
            
<div class="weui_cell">
 <div class="weui_cell_bd weui_cell_primary"> <p>Number</p> </div>
  <div style="font-size: 0px;" class="weui_cell_ft">
   <a class="number-selector number-selector-sub needsclick">-</a>
   <input pattern="[0-9]*" class="number-input" style="width: 50px;" value='1'  data-min="1" data-max="10" data-step="2">
    <a class="number-selector number-selector-plus needsclick">+</a> 
    </div> <div class="weui_cell_ft" style="display: none;"> 0 </div> </div>
            
            
            
<div class="weui_cell">
 <div class="weui_cell_bd weui_cell_primary"> <p>Number</p> </div>
  <div style="font-size: 0px;" class="weui_cell_ft">
   <a class="number-selector number-selector-sub needsclick">-</a>
   <input pattern="[0-9]*" class="number-input" style="width: 50px;" value='0'  data-min="0" data-max="10" data-step="1">
    <a class="number-selector number-selector-plus needsclick">+</a> 
    </div> <div class="weui_cell_ft" style="display: none;"> 0 </div> </div>
                       
            
            
            
                        
   </div>     
       
 <div class="rater">
  <a class="rater-box" style="margin-right: 2px; font-size: 25px; width: 25px; height: 25px; color: rgb(255, 204, 102);"> <span class="rater-inner">★</span> </a>
  <a class="rater-box" style="margin-right: 2px; font-size: 25px; width: 25px; height: 25px; color: rgb(255, 204, 102);"> <span class="rater-inner">★</span> </a>
  <a class="rater-box" style="margin-right: 2px; font-size: 25px; width: 25px; height: 25px; color: rgb(255, 204, 102);"> <span class="rater-inner">★</span> </a>
  <a class="rater-box" style="margin-right: 2px; font-size: 25px; width: 25px; height: 25px; color: rgb(255, 204, 102);"> <span class="rater-inner">★</span> </a>
  <a class="rater-box" style="margin-right: 2px; font-size: 25px; width: 25px; height: 25px;"> <span class="rater-inner">★</span> </a>
   </div>
       
   	<div class="address-wrap">
		<label for="" class="address-label">选择地址</label>
		<select name="" id="province1"></select>
		<select name="" id="city1"></select>
		<select name="" id="area1"></select>
	</div>      
    <script src="../zepto.min.js"></script> <script src="../example.js"></script>  
     <script src="../picker.min.js"></script> 
     <script src="../city.js"></script> 
<script>
		$("body").areaPick({
		        selectId : {
		            province : "province1",
		            city     : "city1" ,
		            area     : "area1"
		        },
		        defaultArea : {
		            province : "浙江省" ,
		            city     : "杭州市" ,
		            area     : "西湖区"
		        }
		    });

$('.number-selector-plus').click(function(){
        upDownOperation( $(this) );
    });
    $('.number-selector-sub').click(function(){
        upDownOperation( $(this) );
    });
    function upDownOperation(element)
    {
        var _input = element.parent().find('input'),
            _value = _input.val(),
            _step = _input.attr('data-step') || 1;
        //检测当前操作的元素是否有disabled，有则去除
        element.hasClass('disabled') && element.removeClass('disabled');
        //检测当前操作的元素是否是操作的添加按钮（.input-num-up）‘是’ 则为加操作，‘否’ 则为减操作
        if ( element.hasClass('number-selector-plus') )
        {
            var _new_value = parseInt( parseFloat(_value) + parseFloat(_step) ),
                _max = _input.attr('data-max') || false,
                _down = element.parent().find('.number-selector-sub');
            
            //若执行‘加’操作且‘减’按钮存在class='disabled'的话，则移除‘减’操作按钮的class 'disabled'
            _down.hasClass('disabled') && _down.removeClass('disabled');
            if (_max && _new_value >= _max) {
                _new_value = _max;
                element.addClass('disabled');
            }
        } else {
            var _new_value = parseInt( parseFloat(_value) - parseFloat(_step) ),
                _min = _input.attr('data-min') || false,
                _up = element.parent().find('.number-selector-plus');
            //若执行‘减’操作且‘加’按钮存在class='disabled'的话，则移除‘加’操作按钮的class 'disabled'
            _up.hasClass('disabled') && _up.removeClass('disabled');
            if (_min && _new_value <= _min) {
                _new_value = _min;
                element.addClass('disabled');
            }
        }
        _input.val( _new_value );
    }


var single = new Picker({
    "input": "#text",//itemHeight 行高默认30 ,itemsNumber 可视行数7必须奇数
    "cols": [
        {//displayValues:[]存放列显示值
            "width": 100,
            'textAlign':'center',
            "values":['西游记','水浒传','三国演义','红楼梦']
        }
    ],
    "onChange": function(picker, cur, old){
        //console.log(picker);
        document.querySelector(".text-v").innerHTML =cur;
    },
    "onOpen": function(picker){
    },
    "onClose": function(picker){console.log(picker);
         document.querySelector(".text-v").innerHTML = picker.values;
    }
});

var single1 = new Picker({
    "input": "#text1",
     "formatValue": function(picker, values){
        return values[0]+"   "+values[1]+"  "+values[2];
    },
    "cols": [
        {
            "values": ('张飞 关于 刘备 孔明 曹操').split(' ')
        },
        {
            "values": ["在家里","在公司","在车上","在路上","在飞机上","在火车上"]
        },
        {
            "values": ["卖报","吃饭","聊天","看书","打游戏","自言自语","敲代码","装B","cosplay","上QQ","上网"]
        }
    ], 
});

var carVendors = {
  '日本' : ['北海道', '东京', '大阪'],
   '中国' : ['上海', '南京', '重庆', '北京', '西安'],
   '美国' : ['维拉斯', '洛杉矶', '旧金山', '华神盾']
};
pickerDependent = new Picker({
    input: '#text2',
    formatValue: function (picker, values) {
        return values[0]+'  '+values[1];
    },
    cols: [
        {
            width: 110,
            textAlign: 'right',
            values:['日本', '中国', '美国'],
            "onChange": function(picker, country) {
                if(picker.cols[1].replaceValues){
                    picker.cols[1].replaceValues(carVendors[country]);
                }
            }
        },
        {
            textAlign: 'left',
            values: carVendors.日本,
            width: 130
        },
    ]
});

//日期
function createNumberArray(num){
    var arr = [];
    for(var i = 1; i <= num; i++){
        arr.push(i < 10 ? '0' + i : i);
    }
    return arr;
}
var timed =  new Picker({
        input: "#date",
        formatValue: function(picker, values, displayValues) {
            return values[0] + '-' + values[1] + '-' + values[2];
        },
        cols: [
            { width:100,
                values: (function() {
                    var arr = [];
                    for (var i = 1980; i <= 2030; i++) {
                        arr.push(i);
                    }
                    return arr;
                })(),
                onChange: function(picker, values) {
                    var year = picker.cols[0].currentValue;
                    var month = picker.cols[1].currentValue;
                    var day = picker.cols[2].currentValue;
                    var _day = month == 1 || month == 3 || month == 5 || month == 7 || month == 8 || month == 10 || month == 12 ? 31 :
                        month == 4 || month == 6 || month == 9 || month == 11 ? 30 :
                        year % 4 == 0 && year % 100 != 0 || year % 400 == 0 ? 29 : 28;
                    picker.cols[2].replaceValues(createNumberArray(_day));
                    picker.cols[2].select(day > _day ? _day : day);
                }
            },
            // Months
            {
                values: (function () {
                var arr = [];
                for (var i = 1; i <= 12; i++) { arr.push(i < 10 ? '0' + i : i); }
                return arr;
            })(),
                width:100,
                onChange: function(picker, values) {
                    var year = picker.cols[0].currentValue;
                    var month = picker.cols[1].currentValue;
                    var day = picker.cols[2].currentValue;
                    var _day = month == 1 || month == 3 || month == 5 || month == 7 || month == 8 || month == 10 || month == 12 ? 31 :
                        month == 4 || month == 6 || month == 9 || month == 11 ? 30 :
                        year % 4 == 0 && year % 100 != 0 || year % 400 == 0 ? 29 : 28;
                    picker.cols[2].replaceValues(createNumberArray(_day));
                    picker.cols[2].select(day > _day ? _day : day);
                }
            },
            // Days
            {
                values: createNumberArray(31),
                width:100,
            }
        ]
    });

//时间
var timed1 = new Picker({
    input: "#time",
    formatValue: function(picker, values, displayValues){
        return displayValues?displayValues[0]:values[0] + '-' + values[1] + '-' + values[2] + ' ' + values[3] + ':' + values[4];
    },
    cols: [
            {width:80,
            values: (function () {
                var arr = [];
                for (var i = 1980; i <= 2030; i++) { arr.push(i); }
                return arr;
            })(),
          onChange: function(picker, values) {
                    var year = picker.cols[0].currentValue;
                    var month = picker.cols[1].currentValue;
                    var day = picker.cols[2].currentValue;
                    var _day = month == 1 || month == 3 || month == 5 || month == 7 || month == 8 || month == 10 || month == 12 ? 31 :
                        month == 4 || month == 6 || month == 9 || month == 11 ? 30 :
                        year % 4 == 0 && year % 100 != 0 || year % 400 == 0 ? 29 : 28;
                    picker.cols[2].replaceValues(createNumberArray(_day));
                    picker.cols[2].select(day > _day ? _day : day);
                }
        },
        {
            values:(function () {
                var arr = [];
                for (var i = 1; i <= 12; i++) { arr.push(i < 10 ? '0' + i : i); }
                return arr;
            })(),
              onChange: function(picker, values) {
                    var year = picker.cols[0].currentValue;
                    var month = picker.cols[1].currentValue;
                    var day = picker.cols[2].currentValue;
                    var _day = month == 1 || month == 3 || month == 5 || month == 7 || month == 8 || month == 10 || month == 12 ? 31 :
                        month == 4 || month == 6 || month == 9 || month == 11 ? 30 :
                        year % 4 == 0 && year % 100 != 0 || year % 400 == 0 ? 29 : 28;
                    picker.cols[2].replaceValues(createNumberArray(_day));
                    picker.cols[2].select(day > _day ? _day : day);
                },
            width:50
        },
        {
            values:(function () {
                var arr = [];
                for (var i = 1; i <= 31; i++) { arr.push(i < 10 ? '0' + i : i); }
                return arr;
            })(),
            width:50
        },
        {
            values: (function () {
                var arr = [];
                for (var i = 0; i <= 23; i++) { arr.push(i < 10 ? '0' + i : i); }
                return arr;
            })(),
          width:50
        },
        {
            values: (function () {
                var arr = [];
                for (var i = 0; i <= 59; i++) { arr.push(i < 10 ? '0' + i : i); }
                return arr;
            })(),
            width:50
        },
    ]
});

var single5 = new Picker({
    "input": "#time2",
     "formatValue": function(picker, values){
        return values[0]+":"+values[1];
    },
    "cols": [
        {
            "values": (function () {
                var arr = [];
                for (var i = 0; i <= 23; i++) { arr.push(i < 10 ? '0' + i : i); }
                return arr;
            })(),
            width:100
        },
        {
            "values":(function () {
                var arr = [];
                for (var i = 0; i <= 59; i++) { arr.push(i < 10 ? '0' + i : i); }
                return arr;
            })(),
             width:100
        }
    ], 
});

function getDaysArr(year, month){
   
                var arr = [];
                for (var i = 1; i <= 28; i++) { arr.push(i < 10 ? '0' + i : i); }
               
      
    if( [1,3,5,7,8,10,12].indexOf(Number(month)) >= 0 ) return arr.concat([29,30,31]);
    if( [4,6,9,11].indexOf(Number(month)) >= 0 ) return arr.concat([29,30]);
    if( year%400 === 0 || (year%4 === 0 && year%100 !== 0) ) return arr.concat([29]);
    else return arr;
}
pickerMitao = new Picker({
    input: '#time3',
    container: "#time33",
    "itemsNumber": 3,
    "itemHeight": 40,
    "formatValue": function(picker, values){
        return values[0]+"-"+values[1]+"-"+values[2];
    },
    cols: [
        {
            values: (function () {
                var arr = [];
                for (var i = 2000; i <= 2030; i++) { arr.push(i); }
                return arr;
            })(),width:100,
            displayValues: (function () {
                var arr = [];
                for (var i = 2000; i <= 2030; i++) { arr.push(i+"年"); }
                return arr;
            })(),
            "onChange": function(picker, values){
                var lastValue1 = picker.cols[1].getValue();
                var lastValue2 = picker.cols[2].getValue();
                var displayDaysArr = (getDaysArr(picker.cols[0].currentValue, picker.cols[1].currentValue).join("日,")+"日").split(",");
                var daysArr = getDaysArr(picker.cols[0].currentValue, picker.cols[1].currentValue);
                if( daysArr.length != picker.cols[2].values.length ){
                    picker.cols[2].replaceValues(daysArr, displayDaysArr);
                    picker.cols[2].values = daysArr;
                    picker.cols[1].select(lastValue1);
                    picker.cols[2].select(lastValue2);
                } 
            }
        },
        {
            values:(function () {
                var arr = [];
                for (var i = 1; i <= 12; i++) { arr.push(i < 10 ? '0' + i : i); }
                return arr;
            })(),
            width:60,
            displayValues: ("1 2 3 4 5 6 7 8 9 10 11 12".split(" ").join("月,")+"月").split(","),
            "onChange": function(picker, values){
                console.log( picker.cols[2].getValue() );
                var lastValue = picker.cols[2].getValue();
                var displayDaysArr = (getDaysArr(picker.cols[0].currentValue, picker.cols[1].currentValue).join("日,")+"日").split(",");
                var daysArr = getDaysArr(picker.cols[0].currentValue, picker.cols[1].currentValue);
                if( daysArr.length != picker.cols[2].values.length ){
                    picker.cols[2].replaceValues(daysArr, displayDaysArr);
                    picker.cols[2].values = daysArr;
                    picker.cols[2].select(lastValue);
                } 
            }
        },
        {
            values: getDaysArr(2000,1),
            width:60,
            displayValues: (getDaysArr(2000,1).join("日,")+"日").split(",")
        },
    ]
});


single8 = new PickerDialog({
    input: "#da",
    innerHTML:'<div class="weui_cells weui_cells_form "  style="margin-top: 0px;height:100%;"> '+
            '<div class="weui_cell">'+
                '<div class="weui_cell_hd"><label for="" class="weui_label">你最喜欢的人是谁</label></div>'+
                '<div class="weui_cell_bd weui_cell_primary">'+
                    '<input class="weui_input" type="text" value="" /></div></div>'+
         '<div class="weui_cell">'+
                '<div class="weui_cell_hd"><label for="" class="weui_label">你喜欢吃西瓜</label></div>'+
                '<div class="weui_cell_bd weui_cell_primary">'+
                    '<input class="weui_input" type="text" value="" /></div></div>'+
           '<div class="weui_cell">'+
                '<div class="weui_cell_hd"><label for="" class="weui_label">我来自美国</label></div>'+
                '<div class="weui_cell_bd weui_cell_primary">'+
                    '<input class="weui_input" type="text" value="" /></div></div>'+
            '<div class="weui_cell">'+
                '<div class="weui_cell_hd"><label for="" class="weui_label">我们都是好孩子</label></div>'+
                '<div class="weui_cell_bd weui_cell_primary">'+
                    '<input class="weui_input" type="text" value="" /></div></div>'+                            
                    '</div>',
    onOpen: function(dialog){
        console.log(dialog);
    
    },
    onClose: function(dialog){
   console.log(dialog);
    }
});





</script>

       
</body>
</html>
